<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who Wants to Be a Millionaire?</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@300;400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Pastel palette to match the provided image */
            --primary-gold: #FBEFFF;
            --dark-blue: #2E2548;
            --light-blue: #A9B8FF;
            --accent-purple: #C7A5FF;
            --bright-orange: #FFC6A5;
            --neon-green: #C9FFD9;
            --neon-pink: #FFB7E1;
            --text-white: #FFFFFF;
            --shadow-glow: 0 0 30px rgba(251, 239, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #2E2548 0%, #A9B8FF 45%, #FBEFFF 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background stars */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: rgba(255, 183, 225, 0.6);
            border-radius: 50%;
            animation: float 15s infinite;
            box-shadow: 0 0 12px rgba(255, 235, 255, 0.9);
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px) scale(0.5);
                opacity: 0;
            }
        }

        /* Confetti animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent-purple);
            position: absolute;
            animation: confettiFall 3s linear forwards;
            z-index: 1000;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Spotlight effect */
        .spotlight {
            position: fixed;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 183, 225, 0.35) 0%, transparent 70%);
            pointer-events: none;
            z-index: 1;
            animation: spotlightPulse 3s infinite;
        }

        @keyframes spotlightPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .logo-circle {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-gold), var(--bright-orange));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 36px;
            color: var(--dark-blue);
            box-shadow: var(--shadow-glow), 0 0 60px rgba(199, 165, 255, 0.8);
            animation: logoSpin 3s infinite;
            position: relative;
        }

        @keyframes logoSpin {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                box-shadow: var(--shadow-glow), 0 0 60px rgba(199, 165, 255, 0.8);
            }
            50% {
                transform: scale(1.1) rotate(180deg);
                box-shadow: 0 0 80px rgba(255, 183, 225, 0.9), 0 0 100px rgba(199, 165, 255, 0.8);
            }
        }

        .logo-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-green));
            opacity: 0;
            animation: ringPulse 2s infinite;
        }

        @keyframes ringPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.3;
            }
        }

        .title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 56px;
            background: linear-gradient(135deg, var(--primary-gold), var(--neon-pink), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
            text-shadow: 0 4px 20px rgba(199, 165, 255, 0.5);
            animation: titleGlow 2s infinite;
        }

        @keyframes titleGlow {
            0%, 100% {
                filter: drop-shadow(0 0 10px rgba(199, 165, 255, 0.7));
            }
            50% {
                filter: drop-shadow(0 0 30px rgba(255, 183, 225, 0.9));
            }
        }

        /* Game Stats */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(70, 52, 104, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 40px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 183, 225, 0.3);
            animation: fadeIn 1s ease-out 0.3s both;
            position: relative;
            overflow: hidden;
        }

        .stats-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 183, 225, 0.18), transparent);
            animation: statsShine 3s infinite;
        }

        @keyframes statsShine {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 1;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-purple), var(--bright-orange));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            animation: iconBounce 2s infinite;
        }

        @keyframes iconBounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        .stat-info {
            display: flex;
            flex-direction: column;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-gold);
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 10px rgba(199, 165, 255, 0.7);
        }

        .stat-value.score-update {
            animation: scoreFlash 0.5s ease-out;
        }

        @keyframes scoreFlash {
            0%, 100% {
                transform: scale(1);
                color: var(--primary-gold);
            }
            50% {
                transform: scale(1.3);
                color: var(--neon-green);
                text-shadow: 0 0 20px var(--neon-green);
            }
        }

        /* Question Card */
        .question-card {
            background: linear-gradient(135deg, rgba(70, 52, 104, 0.92), rgba(201, 173, 255, 0.9));
            backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 50px;
            margin-bottom: 40px;
            border: 2px solid rgba(255, 235, 255, 0.4);
            box-shadow: 0 20px 60px rgba(46, 37, 72, 0.7), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: scaleIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.5s both;
            position: relative;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                transparent,
                rgba(255, 183, 225, 0.25),
                transparent 30%
            );
            animation: cardRotate 4s linear infinite;
        }

        @keyframes cardRotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .question-card > * {
            position: relative;
            z-index: 1;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .question-number {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
            font-family: 'Orbitron', monospace;
        }

        .subject-badge {
            background: linear-gradient(135deg, var(--accent-purple), var(--bright-orange));
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: badgePulse 2s infinite;
        }

        @keyframes badgePulse {
            0%, 100% {
                box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(139, 92, 246, 0.8), 0 0 30px rgba(255, 107, 53, 0.6);
            }
        }

        .question-text {
            font-size: 28px;
            color: var(--text-white);
            font-weight: 600;
            line-height: 1.5;
            text-align: center;
            margin: 30px 0;
            animation: slideInQuestion 0.8s ease-out;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideInQuestion {
            from {
                transform: translateX(-50px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Answer Options */
        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 40px;
        }

        .answer-option {
            background: linear-gradient(135deg, rgba(199, 165, 255, 0.28), rgba(255, 183, 225, 0.28));
            border: 2px solid rgba(255, 235, 255, 0.45);
            border-radius: 24px;
            padding: 25px 30px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
            animation: slideInAnswer 0.6s ease-out backwards;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .answer-option:nth-child(1) { animation-delay: 0.7s; }
        .answer-option:nth-child(2) { animation-delay: 0.8s; }
        .answer-option:nth-child(3) { animation-delay: 0.9s; }
        .answer-option:nth-child(4) { animation-delay: 1s; }

        @keyframes slideInAnswer {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .answer-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 183, 225, 0.4), transparent);
            transition: left 0.5s;
        }

        .answer-option::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(255, 183, 225, 0) 0%, 
                rgba(199, 165, 255, 0.15) 50%, 
                rgba(255, 183, 225, 0) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            border-radius: 20px;
            pointer-events: none;
        }

        .answer-option:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--neon-pink);
            box-shadow: 0 15px 40px rgba(255, 183, 225, 0.55), 0 0 30px rgba(201, 173, 255, 0.5);
        }

        .answer-option:hover::before {
            left: 100%;
        }

        .answer-option:hover::after {
            opacity: 1;
        }

        .answer-option:active {
            transform: translateY(-2px) scale(0.98);
        }

        .answer-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary-gold), var(--neon-pink));
            border-radius: 12px;
            font-weight: 700;
            font-size: 20px;
            color: var(--dark-blue);
            margin-right: 20px;
            font-family: 'Orbitron', monospace;
            box-shadow: 0 4px 15px rgba(199, 165, 255, 0.6);
        }

        .answer-text {
            font-size: 18px;
            color: var(--text-white);
            font-weight: 500;
            display: inline;
        }

        .answer-option.correct {
            background: linear-gradient(135deg, rgba(201, 255, 217, 0.7), rgba(183, 244, 216, 0.7));
            border-color: var(--neon-green);
            animation: correctPulse 0.6s ease-out;
            box-shadow: 0 0 40px rgba(201, 255, 217, 0.8), 0 0 60px rgba(183, 244, 216, 0.6);
        }

        @keyframes correctPulse {
            0%, 100% {
                transform: scale(1);
            }
            25% {
                transform: scale(1.05);
            }
            50% {
                transform: scale(0.98);
            }
            75% {
                transform: scale(1.03);
            }
        }

        .answer-option.wrong {
            background: linear-gradient(135deg, rgba(255, 179, 186, 0.7), rgba(255, 183, 225, 0.7));
            border-color: var(--neon-pink);
            animation: shake 0.5s ease-out;
            box-shadow: 0 0 40px rgba(255, 183, 225, 0.9);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .answer-option.disabled {
            pointer-events: none;
            opacity: 0.5;
        }

        /* Lifelines */
        .lifelines {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-out 0.6s both;
        }

        .lifeline-btn {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, rgba(199, 165, 255, 0.5), rgba(255, 183, 225, 0.5));
            border: 3px solid rgba(255, 235, 255, 0.7);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 5px 20px rgba(199, 165, 255, 0.4);
        }

        .lifeline-btn::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--neon-green), var(--neon-pink));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .lifeline-btn:hover:not(.used) {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 10px 40px rgba(255, 183, 225, 0.7), 0 0 30px rgba(199, 165, 255, 0.7);
            border-color: var(--neon-pink);
        }

        .lifeline-btn:hover:not(.used)::before {
            opacity: 0.3;
        }

        .lifeline-btn.used {
            opacity: 0.3;
            cursor: not-allowed;
            filter: grayscale(1);
            transform: scale(0.9);
        }

        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 80px 40px;
            animation: fadeIn 1s ease-out;
        }

        .start-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 72px;
            background: linear-gradient(135deg, var(--primary-gold), var(--neon-pink), var(--accent-purple), var(--light-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            animation: titleMegaGlow 3s infinite, textWave 2s infinite;
            background-size: 200% 200%;
        }

        @keyframes titleMegaGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(199, 165, 255, 0.7));
                background-position: 0% 50%;
            }
            50% {
                filter: drop-shadow(0 0 60px rgba(255, 183, 225, 1)) drop-shadow(0 0 80px rgba(199, 165, 255, 0.9));
                background-position: 100% 50%;
            }
        }

        @keyframes textWave {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .start-subtitle {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 50px;
            animation: subtitleFloat 3s infinite;
        }

        @keyframes subtitleFloat {
            0%, 100% {
                transform: translateY(0);
                opacity: 0.9;
            }
            50% {
                transform: translateY(-5px);
                opacity: 1;
            }
        }

        .start-btn {
            background: linear-gradient(135deg, var(--primary-gold), var(--neon-pink));
            color: var(--dark-blue);
            font-size: 24px;
            font-weight: 700;
            padding: 20px 60px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(255, 183, 225, 0.6), 0 0 60px rgba(201, 173, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .start-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .start-btn:hover {
            transform: translateY(-8px) scale(1.1);
            box-shadow: 0 15px 50px rgba(255, 183, 225, 0.8), 0 0 80px rgba(199, 165, 255, 0.8);
        }

        .start-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .start-btn:active {
            transform: translateY(-4px) scale(1.05);
        }

        /* Game Over Screen */
        .game-over-screen {
            text-align: center;
            padding: 80px 40px;
            animation: fadeIn 1s ease-out;
        }

        .game-over-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 64px;
            color: var(--neon-pink);
            margin-bottom: 20px;
            animation: gameOverGlow 2s infinite;
        }

        @keyframes gameOverGlow {
            0%, 100% {
                text-shadow: 0 0 20px rgba(255, 183, 225, 0.7);
                transform: scale(1);
            }
            50% {
                text-shadow: 0 0 40px rgba(199, 165, 255, 0.9), 0 0 60px rgba(255, 183, 225, 0.8);
                transform: scale(1.05);
            }
        }

        .final-score {
            font-size: 48px;
            color: var(--text-white);
            font-weight: 700;
            margin-bottom: 40px;
            font-family: 'Orbitron', monospace;
            animation: scorePulse 1.5s infinite;
        }

        @keyframes scorePulse {
            0%, 100% {
                color: var(--primary-gold);
                text-shadow: 0 0 20px rgba(199, 165, 255, 0.7);
            }
            50% {
                color: var(--neon-green);
                text-shadow: 0 0 40px rgba(201, 255, 217, 0.9);
            }
        }

        .play-again-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--neon-pink));
            color: var(--text-white);
            font-size: 20px;
            font-weight: 600;
            padding: 18px 50px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(199, 165, 255, 0.5);
        }

        .play-again-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(199, 165, 255, 0.8), 0 0 50px rgba(255, 183, 225, 0.8);
        }

        /* Sound Toggle */
        .sound-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(199, 165, 255, 0.5), rgba(255, 183, 225, 0.5));
            border: 3px solid rgba(255, 235, 255, 0.7);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        .sound-toggle:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 10px 30px rgba(199, 165, 255, 0.7);
        }

        .sound-toggle.muted {
            opacity: 0.5;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .title {
                font-size: 36px;
            }

            .answers-grid {
                grid-template-columns: 1fr;
            }

            .question-text {
                font-size: 22px;
            }

            .answer-text {
                font-size: 16px;
            }

            .stats-bar {
                flex-direction: column;
                gap: 20px;
            }

            .start-title {
                font-size: 48px;
            }

            .question-card {
                padding: 30px 20px;
            }
        }

        .hidden {
            display: none;
        }

        /* Timer Animation */
        .timer-ring {
            position: relative;
            width: 60px;
            height: 60px;
        }

        .timer-ring svg {
            transform: rotate(-90deg);
        }

        .timer-ring circle {
            fill: none;
            stroke-width: 4;
        }

        .timer-ring .bg {
            stroke: rgba(255, 255, 255, 0.25);
        }

        .timer-ring .progress {
            stroke: var(--accent-purple);
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
            filter: drop-shadow(0 0 5px rgba(199, 165, 255, 0.9));
        }

        .timer-ring .progress.warning {
            stroke: var(--bright-orange);
            animation: timerWarning 1s infinite;
        }

        .timer-ring .progress.danger {
            stroke: var(--neon-pink);
            animation: timerDanger 0.5s infinite;
        }

        @keyframes timerWarning {
            0%, 100% {
                filter: drop-shadow(0 0 5px rgba(255, 107, 53, 0.8));
            }
            50% {
                filter: drop-shadow(0 0 15px rgba(255, 107, 53, 1));
            }
        }

        @keyframes timerDanger {
            0%, 100% {
                filter: drop-shadow(0 0 10px rgba(255, 16, 240, 1));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(255, 16, 240, 1));
                transform: scale(1.1);
            }
        }

        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-purple);
            font-family: 'Orbitron', monospace;
        }

        .timer-text.warning {
            color: var(--bright-orange);
        }

        .timer-text.danger {
            color: var(--neon-pink);
            animation: timerTextPulse 0.5s infinite;
        }

        @keyframes timerTextPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(46, 37, 72, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(70, 52, 104, 0.95), rgba(169, 184, 255, 0.95));
            border: 3px solid rgba(255, 235, 255, 0.6);
            border-radius: 30px;
            padding: 40px 50px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6), 0 0 40px rgba(199, 165, 255, 0.4);
            transform: scale(0.8) translateY(-50px);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                transparent,
                rgba(255, 183, 225, 0.15),
                transparent 30%
            );
            animation: cardRotate 4s linear infinite;
        }

        .modal-content > * {
            position: relative;
            z-index: 1;
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .modal-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent-purple), var(--neon-pink));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 5px 20px rgba(199, 165, 255, 0.5);
            animation: iconBounce 2s infinite;
        }

        .modal-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 32px;
            color: var(--text-white);
            text-shadow: 0 2px 10px rgba(199, 165, 255, 0.5);
        }

        .modal-body {
            color: var(--text-white);
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 30px;
            text-align: center;
        }

        .modal-body .friend-name {
            color: var(--neon-pink);
            font-weight: 700;
            font-size: 20px;
        }

        .modal-body .answer-suggestion {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-gold), var(--neon-pink));
            color: var(--dark-blue);
            padding: 5px 15px;
            border-radius: 12px;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            margin: 0 5px;
            box-shadow: 0 3px 15px rgba(199, 165, 255, 0.4);
        }

        .poll-results {
            background: rgba(46, 37, 72, 0.4);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
        }

        .poll-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            position: relative;
        }

        .poll-item:last-child {
            margin-bottom: 0;
        }

        .poll-letter {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary-gold), var(--neon-pink));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            color: var(--dark-blue);
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: 0 3px 10px rgba(199, 165, 255, 0.4);
        }

        .poll-bar-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .poll-logo-space {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            opacity: 0.6;
        }

        .poll-bar-container {
            flex: 1;
            background: rgba(46, 37, 72, 0.5);
            border-radius: 12px;
            height: 40px;
            position: relative;
            overflow: visible;
            display: flex;
            align-items: center;
        }

        .poll-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-purple), var(--neon-pink));
            border-radius: 12px;
            transition: width 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 0 15px rgba(199, 165, 255, 0.5);
            animation: barGlow 2s infinite;
            position: absolute;
            left: 0;
            top: 0;
        }

        @keyframes barGlow {
            0%, 100% {
                box-shadow: 0 0 15px rgba(199, 165, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 25px rgba(255, 183, 225, 0.8);
            }
        }

        .poll-percentage {
            color: var(--text-white);
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            font-size: 16px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            pointer-events: none;
        }

        .modal-close-btn {
            background: linear-gradient(135deg, var(--accent-purple), var(--neon-pink));
            color: var(--text-white);
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(199, 165, 255, 0.4);
            display: block;
            margin: 0 auto;
        }

        .modal-close-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(255, 183, 225, 0.6);
        }

        .modal-close-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Money Ladder Display */
        .money-ladder {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, rgba(70, 52, 104, 0.95), rgba(169, 184, 255, 0.95));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 235, 255, 0.4);
            border-radius: 20px;
            padding: 20px 15px;
            width: 200px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(46, 37, 72, 0.6);
            animation: slideInRight 0.8s ease-out 1s both;
        }

        @keyframes slideInRight {
            from {
                transform: translateY(-50%) translateX(250px);
                opacity: 0;
            }
            to {
                transform: translateY(-50%) translateX(0);
                opacity: 1;
            }
        }

        .money-ladder-title {
            text-align: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 20px;
            color: var(--text-white);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 183, 225, 0.3);
        }

        .money-step {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 12px;
            background: rgba(46, 37, 72, 0.3);
            border: 2px solid rgba(255, 235, 255, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .money-step-number {
            font-family: 'Orbitron', monospace;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 600;
        }

        .money-step-amount {
            font-family: 'Orbitron', monospace;
            font-size: 14px;
            color: var(--text-white);
            font-weight: 700;
        }

        .money-step.safe {
            background: linear-gradient(135deg, rgba(199, 165, 255, 0.3), rgba(255, 183, 225, 0.3));
            border-color: var(--accent-purple);
        }

        .money-step.safe .money-step-amount {
            color: var(--accent-purple);
        }

        .money-step.current {
            background: linear-gradient(135deg, rgba(255, 183, 225, 0.5), rgba(199, 165, 255, 0.5));
            border-color: var(--neon-pink);
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 183, 225, 0.6);
            animation: currentPulse 2s infinite;
        }

        @keyframes currentPulse {
            0%, 100% {
                box-shadow: 0 5px 20px rgba(255, 183, 225, 0.6);
            }
            50% {
                box-shadow: 0 5px 30px rgba(255, 183, 225, 0.9);
            }
        }

        .money-step.current .money-step-amount {
            color: var(--neon-pink);
        }

        .money-step.completed {
            background: linear-gradient(135deg, rgba(201, 255, 217, 0.4), rgba(183, 244, 216, 0.4));
            border-color: var(--neon-green);
        }

        .money-step.completed .money-step-amount {
            color: var(--neon-green);
        }

        /* Leaderboard Styles */
        .leaderboard-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(199, 165, 255, 0.5), rgba(255, 183, 225, 0.5));
            border: 3px solid rgba(255, 235, 255, 0.7);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(199, 165, 255, 0.4);
        }

        .leaderboard-btn:hover {
            transform: scale(1.1) rotate(-10deg);
            box-shadow: 0 10px 30px rgba(199, 165, 255, 0.7);
        }

        .leaderboard-modal .modal-content {
            max-width: 600px;
        }

        .leaderboard-table {
            width: 100%;
            margin: 20px 0;
        }

        .leaderboard-row {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin: 8px 0;
            background: rgba(46, 37, 72, 0.4);
            border-radius: 12px;
            border: 2px solid rgba(255, 235, 255, 0.2);
            transition: all 0.3s ease;
        }

        .leaderboard-row:hover {
            background: rgba(46, 37, 72, 0.6);
            border-color: var(--neon-pink);
            transform: translateX(5px);
        }

        .leaderboard-rank {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-purple), var(--neon-pink));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 16px;
            color: var(--dark-blue);
            margin-right: 15px;
            flex-shrink: 0;
        }

        .leaderboard-rank.first {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .leaderboard-rank.second {
            background: linear-gradient(135deg, #C0C0C0, #A8A8A8);
        }

        .leaderboard-rank.third {
            background: linear-gradient(135deg, #CD7F32, #B8860B);
        }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-weight: 600;
            color: var(--text-white);
            font-size: 16px;
            margin-bottom: 3px;
        }

        .leaderboard-score {
            font-family: 'Orbitron', monospace;
            color: var(--neon-green);
            font-size: 14px;
            font-weight: 700;
        }

        .leaderboard-date {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            font-family: 'Orbitron', monospace;
        }

        .name-input-container {
            margin: 20px 0;
        }

        .name-input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 235, 255, 0.4);
            background: rgba(46, 37, 72, 0.5);
            color: var(--text-white);
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .name-input:focus {
            border-color: var(--neon-pink);
            box-shadow: 0 0 20px rgba(255, 183, 225, 0.4);
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* Music Control */
        .music-toggle {
            position: fixed;
            top: 90px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(199, 165, 255, 0.5), rgba(255, 183, 225, 0.5));
            border: 3px solid rgba(255, 235, 255, 0.7);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        .music-toggle:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 10px 30px rgba(199, 165, 255, 0.7);
        }

        .music-toggle.playing {
            animation: musicPulse 1s infinite;
        }

        @keyframes musicPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        /* Mobile responsiveness for new features */
        @media (max-width: 968px) {
            .money-ladder {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Animated particles -->
    <div class="particles" id="particles"></div>

    <!-- Spotlight effects -->
    <div class="spotlight" id="spotlight1" style="top: 10%; left: 20%;"></div>
    <div class="spotlight" id="spotlight2" style="top: 60%; right: 15%;"></div>

    <!-- Sound Toggle -->
    <button class="sound-toggle" id="soundToggle" onclick="toggleSound()">üîä</button>

    <!-- Music Toggle -->
    <!-- <button class="music-toggle" id="musicToggle" onclick="toggleMusic()">üéµ</button> -->

    <!-- Leaderboard Button -->
    <button class="leaderboard-btn" id="leaderboardBtn" onclick="showLeaderboard()">üèÜ</button>

    <div class="container">
        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <div class="header">
                <div class="logo">
                    <div class="logo-circle"><img style="width: 100%;" src="https://upload.wikimedia.org/wikipedia/vi/c/cb/ALTP_LOGO_2021.png" alt="L·ªói ·∫£nh"></div>
                </div>
                <h1 class="start-title">Who Wants to Be a Millionaire?</h1>
                <p class="start-subtitle">Test your knowledge across all subjects!</p>
            </div>
            <button class="start-btn" onclick="startGame()">Start Game</button>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="hidden">
            <div class="header">
                <div class="logo">
                    <div class="logo-circle"><img style="width: 100%;" src="https://upload.wikimedia.org/wikipedia/vi/c/cb/ALTP_LOGO_2021.png" alt="L·ªói ·∫£nh"></div>
                    <h1 class="title">Millionaire</h1>
                </div>
            </div>

            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-info">
                        <span class="stat-label">Score</span>
                        <span class="stat-value" id="score">$0</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <span class="stat-label">Question</span>
                        <span class="stat-value" id="questionCounter">1/15</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="timer-ring">
                        <svg width="60" height="60">
                            <circle class="bg" cx="30" cy="30" r="26"></circle>
                            <circle class="progress" cx="30" cy="30" r="26" 
                                    stroke-dasharray="163.36" 
                                    stroke-dashoffset="0"
                                    id="timerCircle"></circle>
                        </svg>
                        <span class="timer-text" id="timer">30</span>
                    </div>
                </div>
            </div>

            <div class="lifelines">
                <button class="lifeline-btn" id="lifeline5050" onclick="useFiftyFifty()" title="50:50">
                    ‚ûó
                </button>
                <button class="lifeline-btn" id="lifelineAudience" onclick="useAudiencePoll()" title="Ask the Audience">
                    üë•
                </button>
                <button class="lifeline-btn" id="lifelinePhone" onclick="usePhoneFriend()" title="Phone a Friend">
                    üìû
                </button>
            </div>

            <div class="question-card">
                <div class="question-header">
                    <span class="question-number" id="questionNum">Question 1</span>
                    <span class="subject-badge" id="subject">Mathematics</span>
                </div>
                <div class="question-text" id="questionText">
                    Loading question...
                </div>
                <div class="answers-grid" id="answersGrid">
                    <!-- Answers will be inserted here -->
                </div>
            </div>

            <!-- Money Ladder -->
            <div class="money-ladder" id="moneyLadder">
                <div class="money-ladder-title">üí∞ Prize Money</div>
                <div id="moneySteps"></div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="hidden game-over-screen">
            <h2 class="game-over-title">Game Over!</h2>
            <p class="final-score">Final Score: <span id="finalScore">$0</span></p>
            <button class="play-again-btn" onclick="location.reload()">Play Again</button>
        </div>
    </div>

    <!-- Modal for Lifelines -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon">üìû</div>
                <h3 class="modal-title" id="modalTitle">Phone a Friend</h3>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be inserted here -->
            </div>
            <button class="modal-close-btn" onclick="closeModal()">Got it!</button>
        </div>
    </div>

    <script>
        // Game State
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let questionNumber = 1;
        let usedLifelines = {
            fiftyFifty: false,
            audience: false,
            phone: false
        };
        let timer;
        let timeLeft = 30;
        let soundEnabled = true;
        let musicEnabled = false;
        let backgroundMusic = null;

        // Money ladder
        const moneyLadder = [
            100, 200, 300, 500, 1000,
            2000, 4000, 8000, 16000, 32000,
            64000, 125000, 250000, 500000, 1000000
        ];

        // Safe havens (guaranteed money if you reach these levels)
        const safeHavens = [1000, 32000, 1000000];

        // Modal functions
        function showModal(icon, title, bodyHTML) {
            const modal = document.getElementById('modalOverlay');
            document.getElementById('modalIcon').textContent = icon;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = bodyHTML;
            modal.classList.add('active');
        }

        function closeModal() {
            const modal = document.getElementById('modalOverlay');
            modal.classList.remove('active');
        }

        // Sound System using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (!soundEnabled) return;

            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            switch(type) {
                case 'correct':
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                    break;
                
                case 'wrong':
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.5);
                    oscillator.type = 'sawtooth';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                    break;
                
                case 'click':
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
                
                case 'lifeline':
                    oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(554.37, audioContext.currentTime + 0.1);
                    oscillator.type = 'triangle';
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                
                case 'tick':
                    oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
                    oscillator.type = 'square';
                    gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.05);
                    break;
                
                case 'win':
                    // Victory fanfare
                    [523.25, 659.25, 783.99, 1046.5].forEach((freq, i) => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.15);
                        gain.gain.setValueAtTime(0.2, audioContext.currentTime + i * 0.15);
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.15 + 0.3);
                        osc.start(audioContext.currentTime + i * 0.15);
                        osc.stop(audioContext.currentTime + i * 0.15 + 0.3);
                    });
                    break;
            }
        }

        // Toggle sound
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const btn = document.getElementById('soundToggle');
            btn.textContent = soundEnabled ? 'üîä' : 'üîá';
            btn.classList.toggle('muted');
            playSound('click');
        }

        // Music System
        function createBackgroundMusic() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const musicContext = new AudioContext();
            
            const melody = [
                { freq: 523.25, duration: 0.5 }, // C5
                { freq: 587.33, duration: 0.5 }, // D5
                { freq: 659.25, duration: 0.5 }, // E5
                { freq: 523.25, duration: 0.5 }, // C5
                { freq: 659.25, duration: 0.5 }, // E5
                { freq: 783.99, duration: 1.0 }, // G5
            ];
            
            let currentNote = 0;
            let isPlaying = true;
            
            function playMelody() {
                if (!isPlaying) return;
                
                const note = melody[currentNote];
                const oscillator = musicContext.createOscillator();
                const gainNode = musicContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(musicContext.destination);
                
                oscillator.frequency.setValueAtTime(note.freq, musicContext.currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.05, musicContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, musicContext.currentTime + note.duration);
                
                oscillator.start(musicContext.currentTime);
                oscillator.stop(musicContext.currentTime + note.duration);
                
                currentNote = (currentNote + 1) % melody.length;
                
                setTimeout(playMelody, note.duration * 1000);
            }
            
            return {
                start: () => {
                    isPlaying = true;
                    playMelody();
                },
                stop: () => {
                    isPlaying = false;
                }
            };
        }

        function toggleMusic() {
            musicEnabled = !musicEnabled;
            const btn = document.getElementById('musicToggle');
            
            if (musicEnabled) {
                btn.textContent = 'üéµ';
                btn.classList.add('playing');
                if (!backgroundMusic) {
                    backgroundMusic = createBackgroundMusic();
                }
                backgroundMusic.start();
            } else {
                btn.textContent = 'üé∂';
                btn.classList.remove('playing');
                if (backgroundMusic) {
                    backgroundMusic.stop();
                }
            }
        }

        // Initialize Money Ladder Display
        function initMoneyLadder() {
            const moneySteps = document.getElementById('moneySteps');
            moneySteps.innerHTML = '';
            
            // Display in reverse order (highest first)
            for (let i = moneyLadder.length - 1; i >= 0; i--) {
                const step = document.createElement('div');
                step.className = 'money-step';
                step.id = `money-step-${i}`;
                
                if (safeHavens.includes(moneyLadder[i])) {
                    step.classList.add('safe');
                }
                
                step.innerHTML = `
                    <span class="money-step-number">${i + 1}</span>
                    <span class="money-step-amount">$${moneyLadder[i].toLocaleString()}</span>
                `;
                
                moneySteps.appendChild(step);
            }
        }

        // Update Money Ladder
        function updateMoneyLadder() {
            // Remove all highlights
            document.querySelectorAll('.money-step').forEach(step => {
                step.classList.remove('current', 'completed');
            });
            
            // Mark completed and current
            for (let i = 0; i < questionNumber - 1; i++) {
                const step = document.getElementById(`money-step-${i}`);
                if (step) step.classList.add('completed');
            }
            
            const currentStep = document.getElementById(`money-step-${questionNumber - 1}`);
            if (currentStep) currentStep.classList.add('current');
        }

        // Leaderboard Functions
        function getLeaderboard() {
            const data = localStorage.getItem('millionaireLeaderboard');
            return data ? JSON.parse(data) : [];
        }

        function saveToLeaderboard(name, score) {
            const leaderboard = getLeaderboard();
            const entry = {
                name: name,
                score: score,
                date: new Date().toLocaleDateString()
            };
            
            leaderboard.push(entry);
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard.splice(10); // Keep only top 10
            
            localStorage.setItem('millionaireLeaderboard', JSON.stringify(leaderboard));
        }

        function showLeaderboard() {
            const leaderboard = getLeaderboard();
            
            let leaderboardHTML = '';
            
            if (leaderboard.length === 0) {
                leaderboardHTML = '<p style="text-align: center; color: rgba(255,255,255,0.6); padding: 20px;">No scores yet. Be the first to play!</p>';
            } else {
                leaderboardHTML = '<div class="leaderboard-table">';
                leaderboard.forEach((entry, index) => {
                    const rankClass = index === 0 ? 'first' : (index === 1 ? 'second' : (index === 2 ? 'third' : ''));
                    leaderboardHTML += `
                        <div class="leaderboard-row">
                            <div class="leaderboard-rank ${rankClass}">${index + 1}</div>
                            <div class="leaderboard-info">
                                <div class="leaderboard-name">${entry.name}</div>
                                <div class="leaderboard-score">$${entry.score.toLocaleString()}</div>
                                <div class="leaderboard-date">${entry.date}</div>
                            </div>
                        </div>
                    `;
                });
                leaderboardHTML += '</div>';
            }
            
            showModal('üèÜ', 'Leaderboard - Top 10', leaderboardHTML);
        }

        // Create particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 8 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Create confetti
        function createConfetti() {
            const colors = ['#FFD700', '#FF6B35', '#8B5CF6', '#39FF14', '#FF10F0'];
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = -10 + 'px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = confetti.style.width;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Load questions from JSON
        async function loadQuestions() {
            try {
                const response = await fetch('quest.json');
                const data = await response.json();
                questions = shuffleArray(data.questions).slice(0, 15);
            } catch (error) {
                console.error('Error loading questions:', error);
            }
        }

        // Shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Start game
        async function startGame() {
            playSound('click');
            await loadQuestions();
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            initMoneyLadder();
            loadQuestion();
            startTimer();
        }

        // Load current question
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endGame(true);
                return;
            }

            const question = questions[currentQuestionIndex];
            
            // Update UI
            document.getElementById('questionNum').textContent = `Question ${questionNumber}`;
            document.getElementById('questionCounter').textContent = `${questionNumber}/15`;
            document.getElementById('subject').textContent = question.subject;
            document.getElementById('questionText').textContent = question.question;

            // Update money ladder
            updateMoneyLadder();

            // Create answer options
            const answersGrid = document.getElementById('answersGrid');
            answersGrid.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D'];
            question.answers.forEach((answer, index) => {
                const answerDiv = document.createElement('div');
                answerDiv.className = 'answer-option';
                answerDiv.onclick = () => selectAnswer(index);
                answerDiv.onmouseover = () => playSound('tick');
                answerDiv.innerHTML = `
                    <span class="answer-letter">${letters[index]}</span>
                    <span class="answer-text">${answer}</span>
                `;
                answersGrid.appendChild(answerDiv);
            });

            // Reset timer
            resetTimer();
        }

        // Timer functions
        function startTimer() {
            timeLeft = 30;
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 10 && timeLeft > 5) {
                    document.getElementById('timerCircle').classList.add('warning');
                    document.getElementById('timer').classList.add('warning');
                } else if (timeLeft <= 5) {
                    document.getElementById('timerCircle').classList.add('danger');
                    document.getElementById('timerCircle').classList.remove('warning');
                    document.getElementById('timer').classList.add('danger');
                    document.getElementById('timer').classList.remove('warning');
                    if (timeLeft > 0) playSound('tick');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    playSound('wrong');
                    endGame(false);
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(timer);
            document.getElementById('timerCircle').classList.remove('warning', 'danger');
            document.getElementById('timer').classList.remove('warning', 'danger');
            startTimer();
        }

        function updateTimerDisplay() {
            document.getElementById('timer').textContent = timeLeft;
            const circumference = 163.36;
            const offset = circumference - (timeLeft / 30) * circumference;
            document.getElementById('timerCircle').style.strokeDashoffset = offset;
        }

        // Select answer
        function selectAnswer(selectedIndex) {
            playSound('click');
            clearInterval(timer);
            
            const question = questions[currentQuestionIndex];
            const answerOptions = document.querySelectorAll('.answer-option');
            
            // Disable all options
            answerOptions.forEach(option => option.classList.add('disabled'));

            // Show correct/wrong
            if (selectedIndex === question.correct) {
                answerOptions[selectedIndex].classList.add('correct');
                playSound('correct');
                
                score = moneyLadder[questionNumber - 1];
                const scoreElement = document.getElementById('score');
                scoreElement.textContent = `$${score.toLocaleString()}`;
                scoreElement.classList.add('score-update');
                setTimeout(() => scoreElement.classList.remove('score-update'), 500);
                
                // Create mini confetti for correct answer
                createMiniConfetti(answerOptions[selectedIndex]);
                
                setTimeout(() => {
                    currentQuestionIndex++;
                    questionNumber++;
                    loadQuestion();
                }, 2000);
            } else {
                answerOptions[selectedIndex].classList.add('wrong');
                answerOptions[question.correct].classList.add('correct');
                playSound('wrong');
                
                setTimeout(() => {
                    endGame(false);
                }, 2000);
            }
        }

        // Create mini confetti for correct answers
        function createMiniConfetti(element) {
            const rect = element.getBoundingClientRect();
            const colors = ['#FFD700', '#39FF14'];
            
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = (rect.left + rect.width / 2) + 'px';
                confetti.style.top = (rect.top + rect.height / 2) + 'px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 6 + 3 + 'px';
                confetti.style.height = confetti.style.width;
                confetti.style.position = 'fixed';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 1000);
            }
        }

        // Lifeline: 50:50
        function useFiftyFifty() {
            if (usedLifelines.fiftyFifty) return;
            
            playSound('lifeline');
            usedLifelines.fiftyFifty = true;
            document.getElementById('lifeline5050').classList.add('used');
            
            const question = questions[currentQuestionIndex];
            const answerOptions = document.querySelectorAll('.answer-option');
            
            let removed = 0;
            let indices = [0, 1, 2, 3].filter(i => i !== question.correct);
            indices = shuffleArray(indices);
            
            indices.forEach((index, i) => {
                if (removed < 2) {
                    setTimeout(() => {
                        answerOptions[index].style.opacity = '0.3';
                        answerOptions[index].style.pointerEvents = 'none';
                        answerOptions[index].style.transform = 'scale(0.9)';
                    }, removed * 200);
                    removed++;
                }
            });
        }

        // Lifeline: Ask the Audience
        function useAudiencePoll() {
            if (usedLifelines.audience) return;
            
            playSound('lifeline');
            usedLifelines.audience = true;
            document.getElementById('lifelineAudience').classList.add('used');
            
            const question = questions[currentQuestionIndex];
            const letters = ['A', 'B', 'C', 'D'];
            
            // Generate poll results with bias toward correct answer
            let percentages = [10, 15, 20, 55];
            percentages = shuffleArray(percentages);
            percentages[question.correct] = Math.max(percentages[question.correct], 60);
            
            // Normalize to 100%
            const sum = percentages.reduce((a, b) => a + b, 0);
            percentages = percentages.map(p => Math.round((p / sum) * 100));
            
            // Create poll visualization
            let pollHTML = '<div class="poll-results">';
            percentages.forEach((p, i) => {
                pollHTML += `
                    <div class="poll-item">
                        <div class="poll-letter">${letters[i]}</div>
                        <div class="poll-bar-wrapper">
                            <div class="poll-logo-space">üìä</div>
                            <div class="poll-bar-container">
                                <div class="poll-bar" style="width: ${p}%"></div>
                                <span class="poll-percentage">${p}%</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            pollHTML += '</div>';
            pollHTML += '<p style="margin-top: 15px; font-size: 16px; opacity: 0.8;">The audience has voted! Use this information wisely.</p>';
            
            showModal('üë•', 'Audience Poll Results', pollHTML);
        }

        // Lifeline: Phone a Friend
        function usePhoneFriend() {
            if (usedLifelines.phone) return;
            
            playSound('lifeline');
            usedLifelines.phone = true;
            document.getElementById('lifelinePhone').classList.add('used');
            
            const question = questions[currentQuestionIndex];
            const letters = ['A', 'B', 'C', 'D'];
            
            const friends = ['Alex', 'Jordan', 'Sam', 'Casey', 'Morgan'];
            const friend = friends[Math.floor(Math.random() * friends.length)];
            
            // 80% chance friend knows correct answer
            const knowsAnswer = Math.random() < 0.8;
            const suggestedAnswer = knowsAnswer ? 
                letters[question.correct] : 
                letters[Math.floor(Math.random() * 4)];
            
            const confidence = knowsAnswer ? 
                'pretty confident' : 
                'not 100% sure, but I think';
            
            const messageHTML = `
                <p style="margin-bottom: 20px;">
                    <span class="friend-name">${friend}</span> is on the line...
                </p>
                <p style="font-style: italic; font-size: 20px; line-height: 1.6;">
                    "Hey! I'm ${confidence} the answer is 
                    <span class="answer-suggestion">${suggestedAnswer}</span>. 
                    Good luck!"
                </p>
            `;
            
            showModal('üìû', 'Phone a Friend', messageHTML);
        }

        // End game
        function endGame(won) {
            clearInterval(timer);
            
            if (won) {
                playSound('win');
                createConfetti();
            }
            
            setTimeout(() => {
                document.getElementById('gameScreen').classList.add('hidden');
                document.getElementById('gameOverScreen').classList.remove('hidden');
                document.getElementById('finalScore').textContent = `$${score.toLocaleString()}`;
                
                const title = document.querySelector('.game-over-title');
                if (won) {
                    title.textContent = 'üéâ CONGRATULATIONS! üéâ';
                    title.style.color = '#FFB7E1';
                } else if (score >= 32000) {
                    title.textContent = 'üëè GREAT JOB! üëè';
                    title.style.color = '#C7A5FF';
                } else {
                    title.textContent = 'üí™ GOOD TRY! üí™';
                    title.style.color = '#A9B8FF';
                }
                
                // Show name input for leaderboard
                if (score > 0) {
                    setTimeout(() => {
                        promptForName();
                    }, 1000);
                }
            }, won ? 1000 : 0);
        }

        // Prompt for name to save score
        function promptForName() {
            const nameInputHTML = `
                <div class="name-input-container">
                    <p style="margin-bottom: 15px; font-size: 18px;">Enter your name for the leaderboard:</p>
                    <input type="text" 
                           id="playerNameInput" 
                           class="name-input" 
                           placeholder="Your Name" 
                           maxlength="20"
                           onkeypress="if(event.key === 'Enter') saveScore()">
                    <button class="modal-close-btn" style="margin-top: 15px;" onclick="saveScore()">
                        Save Score
                    </button>
                </div>
            `;
            
            showModal('üèÜ', 'High Score!', nameInputHTML);
            
            // Focus on input
            setTimeout(() => {
                const input = document.getElementById('playerNameInput');
                if (input) input.focus();
            }, 100);
        }

        function saveScore() {
            const input = document.getElementById('playerNameInput');
            const name = input ? input.value.trim() : '';
            
            if (name) {
                saveToLeaderboard(name, score);
                closeModal();
                setTimeout(() => {
                    showLeaderboard();
                }, 300);
            } else {
                alert('Please enter your name!');
            }
        }

        // Initialize
        createParticles();
        
        // Add keyboard support
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('gameScreen').classList.contains('hidden')) return;
            
            const key = e.key.toLowerCase();
            if (['a', 'b', 'c', 'd'].includes(key)) {
                const index = ['a', 'b', 'c', 'd'].indexOf(key);
                const options = document.querySelectorAll('.answer-option');
                if (options[index] && !options[index].classList.contains('disabled')) {
                    selectAnswer(index);
                }
            }
        });
    </script>
</body>
</html>
